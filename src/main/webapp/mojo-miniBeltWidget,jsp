<html>
<center>
<style>
table{
  width:210px; /* width of the mojo widget in Overview mode, remove for Tiles mode*/
}
.text{
  font-family: Overpass;
  text-align: center;
}
.text a{
  color: #333333;
  text-decoration: none;
}

a:hover, a:active{
  text-decoration: underline;
}
</style>
<table id="mini-dashboard">
<tr><td class="text"><span id="_name"></span>, <span id="_wrapText">you're a</span></td></tr>
<tr><td class="text"><a href="https://mojo.redhat.com/community/communities-at-red-hat/communities-of-practice-operations/communities-of-practice-ninja-program"><img class="ninjaIcon" id="_level"></a></td></tr>
<tr><td class="text"><a href="https://mojo.redhat.com/community/communities-at-red-hat/communities-of-practice-operations/communities-of-practice-ninja-program">My Dashboard</a></td></tr>
</table>
</center>

<script>
  var ctx = "https://ninja-graphs-ninja-graphs.6923.rh-us-east-1.openshiftapps.com/ninja-graphs";
  
  var xhr = new XMLHttpRequest();
  xhr.open("GET", ctx+"/api/proxy/summary_"+getUsername(), true);
  xhr.send();
  xhr.onloadend = function () {
    var json=JSON.parse(xhr.responseText);
    document.getElementById("_name").innerHTML=json.displayName;
    if (json.level.toUpperCase() == "ZERO"){
      document.getElementById("_wrapText").innerHTML="you have";
    }else{
      document.getElementById("_wrapText").innerHTML="you're a";
    }
    
    document.getElementById("_level").src=ctx+"/images/"+json.level.toLowerCase()+"_belt_icon.png";
  }

  function getUsername(){
    if(undefined!=window.parent._jive_current_user){
      var username=window.parent._jive_current_user.username;
      var displayName=window.parent._jive_current_user.displayName;
    }
    return username;
  }
  
</script>
</html>